name: Deploy via FTP using ftp-deploy-cli

on:
  push:
    branches:
      - main  # Alterar para a branch desejada

jobs:
  ftp-deploy:
    runs-on: ubuntu-latest

    steps:
      # Checkout do reposit√≥rio
      - name: Checkout repository
        uses: actions/checkout@v3

      # Instalar ftp-deploy
      - name: Install ftp-deploy
        run: npm install ftp-deploy -g

      # Deploy via FTP
      - name: Deploy to FTP Server
        run: |
          ftp-deploy \
            --server ${{ secrets.FTP_HOST }} \
            --user ${{ secrets.FTP_USERNAME }} \
            --password ${{ secrets.FTP_PASSWORD }} \
            --local ./ \
            --remote /public_html/ \
            --exclude "res/**" "node_modules/**" "vendor/**" "views-cache/**"
